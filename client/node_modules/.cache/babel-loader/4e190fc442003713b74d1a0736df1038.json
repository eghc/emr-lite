{"ast":null,"code":"var _jsxFileName = \"/Users/macuser/Documents/Bloc/capstone__/client/src/layouts/Dashboard/components/Topbar/index.jsx\";\nimport React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom'; // Externals\n\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport PropTypes from 'prop-types'; // Material helpers\n\nimport { withStyles } from '@material-ui/core'; // Material components\n\nimport { Badge, IconButton, Popover, Toolbar, Typography } from '@material-ui/core'; // Material icons\n\nimport { Menu as MenuIcon, Close as CloseIcon, NotificationsOutlined as NotificationsIcon, Input as InputIcon } from '@material-ui/icons'; // Shared services\n\nimport { getNotifications } from 'services/notification'; // Custom components\n\nimport { NotificationList } from './components'; // Component styles\n\nimport styles from './styles';\n\nclass Topbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.signal = true;\n    this.state = {\n      notifications: [],\n      notificationsLimit: 4,\n      notificationsCount: 0,\n      notificationsEl: null\n    };\n\n    this.handleSignOut = () => {\n      const history = this.props.history;\n      localStorage.setItem('isAuthenticated', false);\n      history.push('/sign-in');\n    };\n\n    this.handleShowNotifications = event => {\n      this.setState({\n        notificationsEl: event.currentTarget\n      });\n    };\n\n    this.handleCloseNotifications = () => {\n      this.setState({\n        notificationsEl: null\n      });\n    };\n  }\n\n  async getNotifications() {\n    try {\n      const notificationsLimit = this.state.notificationsLimit;\n\n      const _ref = await getNotifications(notificationsLimit),\n            notifications = _ref.notifications,\n            notificationsCount = _ref.notificationsCount;\n\n      if (this.signal) {\n        this.setState({\n          notifications,\n          notificationsCount\n        });\n      }\n    } catch (error) {\n      return;\n    }\n  }\n\n  componentDidMount() {\n    this.signal = true;\n    this.getNotifications();\n  }\n\n  componentWillUnmount() {\n    this.signal = false;\n  }\n\n  render() {\n    const _this$props = this.props,\n          classes = _this$props.classes,\n          className = _this$props.className,\n          title = _this$props.title,\n          isSidebarOpen = _this$props.isSidebarOpen,\n          onToggleSidebar = _this$props.onToggleSidebar;\n    const _this$state = this.state,\n          notifications = _this$state.notifications,\n          notificationsCount = _this$state.notificationsCount,\n          notificationsEl = _this$state.notificationsEl;\n    const rootClassName = classNames(classes.root, className);\n    const showNotifications = Boolean(notificationsEl);\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: rootClassName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      className: classes.toolbar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      className: classes.menuButton,\n      onClick: onToggleSidebar,\n      variant: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, isSidebarOpen ? React.createElement(CloseIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }) : React.createElement(MenuIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })), React.createElement(Typography, {\n      className: classes.title,\n      variant: \"h4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, title), React.createElement(IconButton, {\n      className: classes.notificationsButton,\n      onClick: this.handleShowNotifications,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Badge, {\n      badgeContent: notificationsCount,\n      color: \"primary\",\n      variant: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(NotificationsIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }))), React.createElement(IconButton, {\n      className: classes.signOutButton,\n      onClick: this.handleSignOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(InputIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    })))), React.createElement(Popover, {\n      anchorEl: notificationsEl,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      onClose: this.handleCloseNotifications,\n      open: showNotifications,\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(NotificationList, {\n      notifications: notifications,\n      onSelect: this.handleCloseNotifications,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    })));\n  }\n\n}\n\nTopbar.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  isSidebarOpen: PropTypes.bool,\n  onToggleSidebar: PropTypes.func,\n  title: PropTypes.string\n};\nTopbar.defaultProps = {\n  onToggleSidebar: () => {}\n};\nexport default compose(withRouter, withStyles(styles))(Topbar);","map":{"version":3,"sources":["/Users/macuser/Documents/Bloc/capstone__/client/src/layouts/Dashboard/components/Topbar/index.jsx"],"names":["React","Component","Fragment","withRouter","classNames","compose","PropTypes","withStyles","Badge","IconButton","Popover","Toolbar","Typography","Menu","MenuIcon","Close","CloseIcon","NotificationsOutlined","NotificationsIcon","Input","InputIcon","getNotifications","NotificationList","styles","Topbar","signal","state","notifications","notificationsLimit","notificationsCount","notificationsEl","handleSignOut","history","props","localStorage","setItem","push","handleShowNotifications","event","setState","currentTarget","handleCloseNotifications","error","componentDidMount","componentWillUnmount","render","classes","className","title","isSidebarOpen","onToggleSidebar","rootClassName","root","showNotifications","Boolean","toolbar","menuButton","notificationsButton","signOutButton","vertical","horizontal","propTypes","string","object","isRequired","bool","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { withRouter } from 'react-router-dom';\n\n// Externals\nimport classNames from 'classnames';\nimport compose from 'recompose/compose';\nimport PropTypes from 'prop-types';\n\n// Material helpers\nimport { withStyles } from '@material-ui/core';\n\n// Material components\nimport {\n  Badge,\n  IconButton,\n  Popover,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\n\n// Material icons\nimport {\n  Menu as MenuIcon,\n  Close as CloseIcon,\n  NotificationsOutlined as NotificationsIcon,\n  Input as InputIcon\n} from '@material-ui/icons';\n\n// Shared services\nimport { getNotifications } from 'services/notification';\n\n// Custom components\nimport { NotificationList } from './components';\n\n// Component styles\nimport styles from './styles';\n\nclass Topbar extends Component {\n  signal = true;\n\n  state = {\n    notifications: [],\n    notificationsLimit: 4,\n    notificationsCount: 0,\n    notificationsEl: null\n  };\n\n  async getNotifications() {\n    try {\n      const { notificationsLimit } = this.state;\n\n      const { notifications, notificationsCount } = await getNotifications(\n        notificationsLimit\n      );\n\n      if (this.signal) {\n        this.setState({\n          notifications,\n          notificationsCount\n        });\n      }\n    } catch (error) {\n      return;\n    }\n  }\n\n  componentDidMount() {\n    this.signal = true;\n    this.getNotifications();\n  }\n\n  componentWillUnmount() {\n    this.signal = false;\n  }\n\n  handleSignOut = () => {\n    const { history } = this.props;\n\n    localStorage.setItem('isAuthenticated', false);\n    history.push('/sign-in');\n  };\n\n  handleShowNotifications = event => {\n    this.setState({\n      notificationsEl: event.currentTarget\n    });\n  };\n\n  handleCloseNotifications = () => {\n    this.setState({\n      notificationsEl: null\n    });\n  };\n\n  render() {\n    const {\n      classes,\n      className,\n      title,\n      isSidebarOpen,\n      onToggleSidebar\n    } = this.props;\n    const { notifications, notificationsCount, notificationsEl } = this.state;\n\n    const rootClassName = classNames(classes.root, className);\n    const showNotifications = Boolean(notificationsEl);\n\n    return (\n      <Fragment>\n        <div className={rootClassName}>\n          <Toolbar className={classes.toolbar}>\n            <IconButton\n              className={classes.menuButton}\n              onClick={onToggleSidebar}\n              variant=\"text\"\n            >\n              {isSidebarOpen ? <CloseIcon /> : <MenuIcon />}\n            </IconButton>\n            <Typography\n              className={classes.title}\n              variant=\"h4\"\n            >\n              {title}\n            </Typography>\n            <IconButton\n              className={classes.notificationsButton}\n              onClick={this.handleShowNotifications}\n            >\n              <Badge\n                badgeContent={notificationsCount}\n                color=\"primary\"\n                variant=\"dot\"\n              >\n                <NotificationsIcon />\n              </Badge>\n            </IconButton>\n            <IconButton\n              className={classes.signOutButton}\n              onClick={this.handleSignOut}\n            >\n              <InputIcon />\n            </IconButton>\n          </Toolbar>\n        </div>\n        <Popover\n          anchorEl={notificationsEl}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center'\n          }}\n          onClose={this.handleCloseNotifications}\n          open={showNotifications}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center'\n          }}\n        >\n          <NotificationList\n            notifications={notifications}\n            onSelect={this.handleCloseNotifications}\n          />\n        </Popover>\n      </Fragment>\n    );\n  }\n}\n\nTopbar.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  isSidebarOpen: PropTypes.bool,\n  onToggleSidebar: PropTypes.func,\n  title: PropTypes.string\n};\n\nTopbar.defaultProps = {\n  onToggleSidebar: () => {}\n};\n\nexport default compose(\n  withRouter,\n  withStyles(styles)\n)(Topbar);\n"]},"metadata":{},"sourceType":"module"}