{"ast":null,"code":"var _jsxFileName = \"/Users/macuser/Documents/Bloc/capstone__/client/src/views/UserList/components/UsersTable/index.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom'; // Externals\n\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport PerfectScrollbar from 'react-perfect-scrollbar'; // Material helpers\n\nimport { withStyles } from '@material-ui/core'; // Material components\n\nimport { Avatar, Checkbox, Table, TableBody, TableCell, TableHead, TableRow, Typography, TablePagination, Fragment } from '@material-ui/core'; // Shared helpers\n\nimport { getInitials } from 'helpers'; // Shared components\n\nimport { Portlet, PortletContent } from 'components'; // Component styles\n\nimport styles from './styles';\n\nclass UsersTable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: this.props.users,\n      selectedUsers: [],\n      rowsPerPage: this.props.limit,\n      page: 0\n    };\n\n    this.handleSelectAll = event => {\n      const _this$props = this.props,\n            users = _this$props.users,\n            onSelect = _this$props.onSelect;\n      let selectedUsers;\n\n      if (event.target.checked) {\n        selectedUsers = users.map(user => user.id);\n      } else {\n        selectedUsers = [];\n      }\n\n      this.setState({\n        selectedUsers\n      });\n      onSelect(selectedUsers);\n    };\n\n    this.handleSelectOne = (event, id) => {\n      const onSelect = this.props.onSelect;\n      const selectedUsers = this.state.selectedUsers;\n      const selectedIndex = selectedUsers.indexOf(id);\n      let newSelectedUsers = [];\n\n      if (selectedIndex === -1) {\n        newSelectedUsers = newSelectedUsers.concat(selectedUsers, id);\n      } else if (selectedIndex === 0) {\n        newSelectedUsers = newSelectedUsers.concat(selectedUsers.slice(1));\n      } else if (selectedIndex === selectedUsers.length - 1) {\n        newSelectedUsers = newSelectedUsers.concat(selectedUsers.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelectedUsers = newSelectedUsers.concat(selectedUsers.slice(0, selectedIndex), selectedUsers.slice(selectedIndex + 1));\n      }\n\n      this.setState({\n        selectedUsers: newSelectedUsers\n      });\n      onSelect(newSelectedUsers);\n    };\n\n    this.handleChangePage = (event, page) => {\n      this.setState({\n        page\n      });\n    };\n\n    this.handleChangeRowsPerPage = event => {\n      this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n  }\n\n  async getPatients(begin, limit) {\n    const response = await fetch('/getPatients/' + begin + '/' + limit);\n    const body = await response.json();\n\n    if (response.status !== 200) {\n      throw Error(body.message);\n    }\n\n    return body;\n  }\n\n  loadNextPage() {\n    let nextPage = this.state.page + 1;\n    this.setState({\n      page: nextPage\n    });\n    this.getPatients(nextPage * this.state.rowsPerPage, this.state.rowsPerPage).then(res => {\n      this.setState({\n        users: res\n      });\n      console.log(res);\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          classes = _this$props2.classes,\n          className = _this$props2.className;\n    const _this$state = this.state,\n          activeTab = _this$state.activeTab,\n          selectedUsers = _this$state.selectedUsers,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page,\n          users = _this$state.users;\n    const rootClassName = classNames(classes.root, className);\n    return React.createElement(Portlet, {\n      className: rootClassName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(PortletContent, {\n      noPadding: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(PerfectScrollbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(TableHead, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Checkbox, {\n      checked: selectedUsers.length === users.length,\n      color: \"primary\",\n      indeterminate: selectedUsers.length > 0 && selectedUsers.length < users.length,\n      onChange: this.handleSelectAll,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), \"Name\"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"ID\"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"DOB\"), React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Next Appointment\"))), React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, users.filter(user => {\n      if (activeTab === 1) {\n        return !user.returning;\n      }\n\n      if (activeTab === 2) {\n        return user.returning;\n      }\n\n      return user;\n    }).slice(0, rowsPerPage).map(user => React.createElement(TableRow, {\n      className: classes.tableRow,\n      hover: true,\n      key: user.id,\n      selected: selectedUsers.indexOf(user.id) !== -1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      className: classes.tableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.tableCellInner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Checkbox, {\n      checked: selectedUsers.indexOf(user.id) !== -1,\n      color: \"primary\",\n      onChange: event => this.handleSelectOne(event, user.id),\n      value: \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(Avatar, {\n      className: classes.avatar,\n      src: user.icon,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, getInitials(user.firstname)), React.createElement(Link, {\n      to: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: classes.nameText,\n      variant: \"body1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, user.firstname, \" \", user.lastname)))), React.createElement(TableCell, {\n      className: classes.tableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, user.id), React.createElement(TableCell, {\n      className: classes.tableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, moment(user.dob).format('MM/DD/YYYY')), React.createElement(TableCell, {\n      className: classes.tableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, moment(user.createdAt).format('MM/DD/YYYY'))))))), React.createElement(TablePagination, {\n      backIconButtonProps: {\n        'aria-label': 'Previous Page',\n        'onClick': this.loadPreviousPage\n      },\n      component: \"div\",\n      count: users.length,\n      nextIconButtonProps: {\n        'aria-label': 'Next Page',\n        'onClick': this.loadNextPage\n      },\n      onChangePage: this.handleChangePage,\n      onChangeRowsPerPage: this.handleChangeRowsPerPage,\n      page: page,\n      rowsPerPage: rowsPerPage,\n      rowsPerPageOptions: [],\n      labelRowsPerPage: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })));\n  }\n\n}\n\nUsersTable.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  onSelect: PropTypes.func,\n  onShowDetails: PropTypes.func,\n  users: PropTypes.array.isRequired\n};\nUsersTable.defaultProps = {\n  users: [],\n  onSelect: () => {},\n  onShowDetails: () => {}\n};\nexport default withStyles(styles)(UsersTable);","map":{"version":3,"sources":["/Users/macuser/Documents/Bloc/capstone__/client/src/views/UserList/components/UsersTable/index.jsx"],"names":["React","Component","Link","classNames","PropTypes","moment","PerfectScrollbar","withStyles","Avatar","Checkbox","Table","TableBody","TableCell","TableHead","TableRow","Typography","TablePagination","Fragment","getInitials","Portlet","PortletContent","styles","UsersTable","state","users","props","selectedUsers","rowsPerPage","limit","page","handleSelectAll","event","onSelect","target","checked","map","user","id","setState","handleSelectOne","selectedIndex","indexOf","newSelectedUsers","concat","slice","length","handleChangePage","handleChangeRowsPerPage","value","getPatients","begin","response","fetch","body","json","status","Error","message","loadNextPage","nextPage","then","res","console","log","catch","err","render","classes","className","activeTab","rootClassName","root","filter","returning","tableRow","tableCell","tableCellInner","avatar","icon","firstname","nameText","lastname","dob","format","createdAt","loadPreviousPage","propTypes","string","object","isRequired","func","onShowDetails","array","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\n// Externals\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\n\n// Material helpers\nimport { withStyles } from '@material-ui/core';\n\n// Material components\nimport {\n  Avatar,\n  Checkbox,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Typography,\n  TablePagination,\n  Fragment\n} from '@material-ui/core';\n\n// Shared helpers\nimport { getInitials } from 'helpers';\n\n// Shared components\nimport { Portlet, PortletContent } from 'components';\n\n// Component styles\nimport styles from './styles';\n\nclass UsersTable extends Component {\n  state = {\n    users: this.props.users,\n    selectedUsers: [],\n    rowsPerPage: this.props.limit,\n    page: 0\n  };\n\n  async getPatients (begin, limit){\n    const response = await fetch('/getPatients/' + begin + '/'+ limit );\n    const body = await response.json();\n\n    if (response.status !== 200) {\n      throw Error(body.message)\n    }\n    return body;\n  };\n\n  loadNextPage(){\n    let nextPage = this.state.page + 1;\n    this.setState({page: nextPage});\n\n    this.getPatients(nextPage*this.state.rowsPerPage,this.state.rowsPerPage)\n      .then((res) => {\n        this.setState({ users: res});\n        console.log(res);\n      })\n      .catch(err => console.log(err));\n  };\n\n  handleSelectAll = event => {\n    const { users, onSelect } = this.props;\n\n    let selectedUsers;\n\n    if (event.target.checked) {\n      selectedUsers = users.map(user => user.id);\n    } else {\n      selectedUsers = [];\n    }\n\n    this.setState({ selectedUsers });\n\n    onSelect(selectedUsers);\n  };\n\n  handleSelectOne = (event, id) => {\n    const { onSelect } = this.props;\n    const { selectedUsers } = this.state;\n\n    const selectedIndex = selectedUsers.indexOf(id);\n    let newSelectedUsers = [];\n\n    if (selectedIndex === -1) {\n      newSelectedUsers = newSelectedUsers.concat(selectedUsers, id);\n    } else if (selectedIndex === 0) {\n      newSelectedUsers = newSelectedUsers.concat(selectedUsers.slice(1));\n    } else if (selectedIndex === selectedUsers.length - 1) {\n      newSelectedUsers = newSelectedUsers.concat(selectedUsers.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelectedUsers = newSelectedUsers.concat(\n        selectedUsers.slice(0, selectedIndex),\n        selectedUsers.slice(selectedIndex + 1)\n      );\n    }\n\n    this.setState({ selectedUsers: newSelectedUsers });\n\n    onSelect(newSelectedUsers);\n  };\n\n  handleChangePage = (event, page) => {\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = event => {\n    this.setState({ rowsPerPage: event.target.value });\n  };\n\n  render() {\n    const { classes, className } = this.props;\n    const { activeTab, selectedUsers, rowsPerPage, page, users } = this.state;\n\n    const rootClassName = classNames(classes.root, className);\n\n    return (\n      <Portlet className={rootClassName}>\n        <PortletContent noPadding>\n          <PerfectScrollbar>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"left\">\n                    <Checkbox\n                      checked={selectedUsers.length === users.length}\n                      color=\"primary\"\n                      indeterminate={\n                        selectedUsers.length > 0 &&\n                        selectedUsers.length < users.length\n                      }\n                      onChange={this.handleSelectAll}\n                    />\n                    Name\n                  </TableCell>\n                  <TableCell align=\"left\">ID</TableCell>\n                  <TableCell align=\"left\">DOB</TableCell>\n                  <TableCell align=\"left\">Next Appointment</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {users\n                  .filter(user => {\n                    if (activeTab === 1) {\n                      return !user.returning;\n                    }\n\n                    if (activeTab === 2) {\n                      return user.returning;\n                    }\n\n                    return user;\n                  })\n                  .slice(0, rowsPerPage)\n                  .map(user => (\n                    <TableRow\n                      className={classes.tableRow}\n                      hover\n                      key={user.id}\n                      selected={selectedUsers.indexOf(user.id) !== -1}\n                    >\n                      <TableCell className={classes.tableCell}>\n                        <div className={classes.tableCellInner}>\n                          <Checkbox\n                            checked={selectedUsers.indexOf(user.id) !== -1}\n                            color=\"primary\"\n                            onChange={event =>\n                              this.handleSelectOne(event, user.id)\n                            }\n                            value=\"true\"\n                          />\n                          <Avatar\n                            className={classes.avatar}\n                            src={user.icon}\n                          >\n                            {getInitials(user.firstname)}\n                          </Avatar>\n                          <Link to=\"#\">\n                            <Typography\n                              className={classes.nameText}\n                              variant=\"body1\"\n                            >\n                              {user.firstname} {user.lastname}\n                            </Typography>\n                          </Link>\n                        </div>\n                      </TableCell>\n                      <TableCell className={classes.tableCell}>\n                        {user.id}\n                      </TableCell>\n                      <TableCell className={classes.tableCell}>\n                        {moment(user.dob).format('MM/DD/YYYY')}\n                      </TableCell>\n                      <TableCell className={classes.tableCell}>\n                        {moment(user.createdAt).format('MM/DD/YYYY')}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </PerfectScrollbar>\n          <TablePagination\n            backIconButtonProps={{\n              'aria-label': 'Previous Page',\n              'onClick': this.loadPreviousPage\n            }}\n            component=\"div\"\n            count={users.length}\n            nextIconButtonProps={{\n              'aria-label': 'Next Page',\n              'onClick': this.loadNextPage\n            }}\n            onChangePage={this.handleChangePage}\n            onChangeRowsPerPage={this.handleChangeRowsPerPage}\n            page={page}\n            rowsPerPage={rowsPerPage}\n            rowsPerPageOptions={[]}\n            labelRowsPerPage=''\n          />\n        </PortletContent>\n      </Portlet>\n    );\n  }\n}\n\nUsersTable.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object.isRequired,\n  onSelect: PropTypes.func,\n  onShowDetails: PropTypes.func,\n  users: PropTypes.array.isRequired\n};\n\nUsersTable.defaultProps = {\n  users: [],\n  onSelect: () => {},\n  onShowDetails: () => {}\n};\n\nexport default withStyles(styles)(UsersTable);\n"]},"metadata":{},"sourceType":"module"}