{"ast":null,"code":"// Mock data\nimport users from 'data/users';\nimport orders from 'data/orders';\n\nfunction lookupUser(user) {\n  const userCopy = JSON.parse(JSON.stringify(user));\n  const userOrders = userCopy.orders.map(id => orders.find(order => order.id === id));\n  const userMoneySpent = userCopy.orders.reduce((total, order) => total + order.amount, 0);\n  userCopy.orders = userOrders;\n  userCopy.moneySpent = userMoneySpent;\n  return userCopy;\n}\n\nexport const getUsers = (limit = 10) => {\n  this.callBackendAPI().then(res => this.setState({\n    data: res.express\n  })).catch(err => console.log(err));\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const usersLookup = users.slice(0, limit).map(lookupUser);\n      resolve({\n        users: usersLookup,\n        usersTotal: users.length\n      });\n    }, 700);\n  });\n};\n\nasync function callBackendAPI() {\n  const response = await fetch('http://localhost:5000/getPatients');\n  const body = await response.json();\n\n  if (response.status !== 200) {\n    throw Error(body.message);\n  }\n\n  return body;\n}\n\n;\nexport const getUser = id => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const user = users.find(user => user.id === id);\n\n      if (user) {\n        resolve({\n          user: lookupUser(user)\n        });\n      } else {\n        reject({\n          error: 'User not found'\n        });\n      }\n    }, 500);\n  });\n};","map":{"version":3,"sources":["/Users/macuser/Documents/Bloc/capstone__/client/src/services/user/index.js"],"names":["users","orders","lookupUser","user","userCopy","JSON","parse","stringify","userOrders","map","id","find","order","userMoneySpent","reduce","total","amount","moneySpent","getUsers","limit","callBackendAPI","then","res","setState","data","express","catch","err","console","log","Promise","resolve","setTimeout","usersLookup","slice","usersTotal","length","response","fetch","body","json","status","Error","message","getUser","reject","error"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,YAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,QAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeJ,IAAf,CAAX,CAAjB;AACA,QAAMK,UAAU,GAAGJ,QAAQ,CAACH,MAAT,CAAgBQ,GAAhB,CAAoBC,EAAE,IACvCT,MAAM,CAACU,IAAP,CAAYC,KAAK,IAAIA,KAAK,CAACF,EAAN,KAAaA,EAAlC,CADiB,CAAnB;AAGA,QAAMG,cAAc,GAAGT,QAAQ,CAACH,MAAT,CAAgBa,MAAhB,CACrB,CAACC,KAAD,EAAQH,KAAR,KAAkBG,KAAK,GAAGH,KAAK,CAACI,MADX,EAErB,CAFqB,CAAvB;AAKAZ,EAAAA,QAAQ,CAACH,MAAT,GAAkBO,UAAlB;AACAJ,EAAAA,QAAQ,CAACa,UAAT,GAAsBJ,cAAtB;AAEA,SAAOT,QAAP;AACD;;AAED,OAAO,MAAMc,QAAQ,GAAG,CAACC,KAAK,GAAG,EAAT,KAAgB;AACtC,OAAKC,cAAL,GACKC,IADL,CACUC,GAAG,IAAI,KAAKC,QAAL,CAAc;AAAEC,IAAAA,IAAI,EAAEF,GAAG,CAACG;AAAZ,GAAd,CADjB,EAEKC,KAFL,CAEWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFlB;AAIA,SAAO,IAAIG,OAAJ,CAAYC,OAAO,IAAI;AAC5BC,IAAAA,UAAU,CAAC,MAAM;AACf,YAAMC,WAAW,GAAGjC,KAAK,CAACkC,KAAN,CAAY,CAAZ,EAAef,KAAf,EAAsBV,GAAtB,CAA0BP,UAA1B,CAApB;AAEA6B,MAAAA,OAAO,CAAC;AACN/B,QAAAA,KAAK,EAAEiC,WADD;AAENE,QAAAA,UAAU,EAAEnC,KAAK,CAACoC;AAFZ,OAAD,CAAP;AAID,KAPS,EAOP,GAPO,CAAV;AAQD,GATM,CAAP;AAUD,CAfM;;AAiBP,eAAehB,cAAf,GAAgC;AAC5B,QAAMiB,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAD,CAA5B;AACA,QAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;;AAEA,MAAIH,QAAQ,CAACI,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,UAAMC,KAAK,CAACH,IAAI,CAACI,OAAN,CAAX;AACD;;AACD,SAAOJ,IAAP;AACD;;AAAA;AAEH,OAAO,MAAMK,OAAO,GAAGlC,EAAE,IAAI;AAC3B,SAAO,IAAIoB,OAAJ,CAAY,CAACC,OAAD,EAAUc,MAAV,KAAqB;AACtCb,IAAAA,UAAU,CAAC,MAAM;AACf,YAAM7B,IAAI,GAAGH,KAAK,CAACW,IAAN,CAAWR,IAAI,IAAIA,IAAI,CAACO,EAAL,KAAYA,EAA/B,CAAb;;AAEA,UAAIP,IAAJ,EAAU;AACR4B,QAAAA,OAAO,CAAC;AACN5B,UAAAA,IAAI,EAAED,UAAU,CAACC,IAAD;AADV,SAAD,CAAP;AAGD,OAJD,MAIO;AACL0C,QAAAA,MAAM,CAAC;AACLC,UAAAA,KAAK,EAAE;AADF,SAAD,CAAN;AAGD;AACF,KAZS,EAYP,GAZO,CAAV;AAaD,GAdM,CAAP;AAeD,CAhBM","sourcesContent":["// Mock data\nimport users from 'data/users';\nimport orders from 'data/orders';\n\nfunction lookupUser(user) {\n  const userCopy = JSON.parse(JSON.stringify(user));\n  const userOrders = userCopy.orders.map(id =>\n    orders.find(order => order.id === id)\n  );\n  const userMoneySpent = userCopy.orders.reduce(\n    (total, order) => total + order.amount,\n    0\n  );\n\n  userCopy.orders = userOrders;\n  userCopy.moneySpent = userMoneySpent;\n\n  return userCopy;\n}\n\nexport const getUsers = (limit = 10) => {\n  this.callBackendAPI()\n      .then(res => this.setState({ data: res.express }))\n      .catch(err => console.log(err));\n\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const usersLookup = users.slice(0, limit).map(lookupUser);\n\n      resolve({\n        users: usersLookup,\n        usersTotal: users.length\n      });\n    }, 700);\n  });\n};\n\nasync function callBackendAPI (){\n    const response = await fetch('http://localhost:5000/getPatients');\n    const body = await response.json();\n\n    if (response.status !== 200) {\n      throw Error(body.message)\n    }\n    return body;\n  };\n\nexport const getUser = id => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const user = users.find(user => user.id === id);\n\n      if (user) {\n        resolve({\n          user: lookupUser(user)\n        });\n      } else {\n        reject({\n          error: 'User not found'\n        });\n      }\n    }, 500);\n  });\n};\n"]},"metadata":{},"sourceType":"module"}